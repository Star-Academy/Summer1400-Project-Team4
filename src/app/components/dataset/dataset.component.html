<h2 mat-dialog-title>افزودن دیتاست</h2>

<mat-dialog-content [formGroup]="form">
  <mat-form-field>
    <input formControlName="name" matInput placeholder="نام دیتاست" required>
  </mat-form-field>

  <mat-form-field>
    <mat-label>جدا کننده ی سطر</mat-label>
    <mat-select [(value)]="rowSelected" required>
      <mat-option value=",">ویرگول</mat-option>
      <mat-option value="-">خط فاصله</mat-option>
      <mat-option value="//n">سطر جدید</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <mat-label>جدا کننده ی ستون</mat-label>
    <mat-select [(value)]="filedSelected" required>
      <mat-option value=",">ویرگول</mat-option>
      <mat-option value="-">خط فاصله</mat-option>
      <mat-option value="\\n">سطر جدید</mat-option>
    </mat-select>
  </mat-form-field>

  <input #fileUpload (change)="onFileChange($event)" class="file-input" formcontrolname="csvFile"
         required type="file">

  <div>
    <button (click)="fileUpload.click()" class="upload-btn" color="primary"
            mat-mini-fab>
      <mat-icon>attach_file</mat-icon>
    </button>
    {{fileName || "فایلی انتخاب نشده است"}}
  </div>
  <section style="margin-top: 2rem">
    <p>
      <mat-checkbox formControlName="autoMap">اتومپ</mat-checkbox>
    </p>
    <p>
      <mat-checkbox formControlName="doesHaveHeader">هدر</mat-checkbox>
    </p>
  </section>


</mat-dialog-content>

<mat-dialog-actions [formGroup]="form">

  <button (click)="onUpload()" [disabled]="loading || !form.valid || !filedSelected|| !rowSelected" color="primary"
          mat-raised-button>
    آپلود
  </button>

  <button (click)="close()" class="mat-raised-button"
          style="margin-right: 1rem">
    انصراف
  </button>

</mat-dialog-actions>

<mat-progress-bar *ngIf="loading" mode="indeterminate" style="margin-top: 2rem"></mat-progress-bar>
